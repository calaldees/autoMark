<!DOCTYPE html><html>
<head>
    <meta charset="utf-8" />
    <link id="favicon" rel="shortcut icon" type="image/png" href="data:image/png;base64,....==" />
    <title>viewer</title>
    <style>
        table {
            border-spacing: 0;
            border-collapse: collapse;
            border:solid #000 !important;
            border-width:1px 0 0 1px !important;
        }
        table td, th {
            /* border: 1px solid black; */
            border:solid #000 !important;
            border-width:0 1px 1px 0 !important;
            vertical-align: top;
        }
    </style>
</head>
<body>
<div id="main"></div>
<script type="module">

const mainElement = document.getElementById('main') || document.getElementsByTagName('body').item(0)

let _data;
window.onhashchange = function() {
    render(_data)
}

function render(data) {
    //const languages = window.location.hash.replace('#','').split(',').filter((i)=>typeof(i)==="string" && i.length);

    // Clear existing html
    mainElement.innerHTML = ''


    // Build Table
    const table = document.createElement('table')

    const headings = [1,2,3,4,5]

    const table_headings = document.createElement('thead')
    table_headings.appendChild(document.createElement('th'))  // space for username
    for (let heading of headings) {
        const table_heading = document.createElement('th')
        table_heading.textContent = heading
        table_headings.appendChild(table_heading)
    }
    table.appendChild(table_headings)

    for (let [username, week_data] of Object.entries(data)) {
        const table_row = document.createElement('tr')

        const table_row_name = document.createElement('td')
        table_row_name.textContent = username
        table_row.appendChild(table_row_name)

        for (let heading of headings) {
            const week = week_data[heading]
            const table_cell = document.createElement('td');
            //table_cell.append();
            table_row.appendChild(table_cell);
        }
        table.appendChild(table_row);
    }

    mainElement.appendChild(table);
}


fetch(`data.json`)
    .then(response => response.json())
    .then((data)=>_data=data)
    .then(render)
.catch(err => console.error(err))

</script></body></html>